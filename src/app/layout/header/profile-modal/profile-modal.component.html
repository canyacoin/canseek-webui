<a href="javascript:;" class="nav-link" *ngIf="!store.authState.email">
  <button class="btn btn-join btn-sm text-white" (click)="showModal()">Join</button>
</a>

<nz-dropdown 
  [nzPlacement]="'bottomCenter'"  
  *ngIf="store.authState.email"
  [nzTrigger]="'click'"
  >
  <a nz-dropdown [class.offline]="!store.authState.emailVerified" class="user">
    <img class="avatar mr-12" *ngIf="store.authState.photoURL" alt="CanYa" src="{{ store.authState.photoURL }}">

    <i class="anticon anticon-down"></i>
  </a>
  <ul nz-menu>
    <li nz-menu-item *ngIf="!store.authState.emailVerified">
      <span (click)="showModal()">Sign In</span>
    </li>
    <li nz-menu-item *ngIf="store.authState.emailVerified">
        <span (click)="showModal()">User Profile</span>
      </li>
    <li nz-menu-item>
      <a>Balance {{ store.balance }}<i class="can-media-coin ml-12"></i></a>
    </li>
    <li nz-menu-item>
      <button class="buycan" nz-button nzType="primary" [nzLoading]="loading" (click)="buyCan()">buy can</button>
    </li>
  </ul>
</nz-dropdown>

<nz-modal [(nzVisible)]="visible" [nzTitle]="modalTitle" [nzContent]="modalContent" [nzFooter]="modalFooter" (nzOnCancel)="handleCancel()">
  <ng-template #modalTitle>
    User Profile details
  </ng-template>

  <ng-template #modalContent>
    <form nz-form [nzLayout]="vertical" [formGroup]="form" (ngSubmit)="submitForm()">
      <nz-form-item>
        <nz-form-label> MetaMask address: </nz-form-label>
        <nz-form-control>
          <nz-select nzMode="tags" nzPlaceHolder="input or search" formControlName="mm" id="mm">
            <nz-option *ngFor="let option of formData.mm" [nzLabel]="option" [nzValue]="option">
            </nz-option>
          </nz-select>
          <nz-form-extra>Current Address: {{ store.curUser }}</nz-form-extra>
        </nz-form-control>
        
      </nz-form-item>
      
      <nz-form-item>
        <nz-form-label nzFor="your_name" nzRequired> Your Name </nz-form-label>
        <nz-form-control>
          <input nz-input formControlName="your_name" id="your_name" placeholder="First Name, Last Name">
          <nz-form-explain *ngIf="form.get('your_name').dirty && form.get('your_name').errors">Please input Your Name!</nz-form-explain>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label nzFor="your_email" nzRequired> Your Email </nz-form-label>
        <nz-form-control>
          <input nz-input formControlName="your_email" id="your_email" placeholder="name@example.com">
          <nz-form-explain *ngIf="form.get('your_email').dirty && form.get('your_email').errors">Please input Your Email!</nz-form-explain>
          <nz-form-extra>To help us verify your account and job posts, this email domain must match your companyâ€™s website domain. 
              eg. support@canya.com matches canya.com</nz-form-extra>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label nzFor="company_name" nzRequired> Company Name </nz-form-label>
        <nz-form-control>
          <input nz-input formControlName="company_name" id="company_name" placeholder="Company Name">
          <nz-form-explain *ngIf="form.get('company_name').dirty && form.get('company_name').errors">Please input Your Company Name!</nz-form-explain>
        </nz-form-control>
      </nz-form-item>
    </form>

    <p class="fw-600 text-center">We will send you an email to verify this address. 
    <br>Once verified, login  with MetaMask to get started.</p>
  </ng-template>

  <ng-template #modalFooter>
    <button nz-button nzType="default" (click)="handleCancel()">Cancel</button>
    <button nz-button nzType="primary" (click)="handleOk()" [nzLoading]="loading">Verify & save</button>
  </ng-template>
</nz-modal>